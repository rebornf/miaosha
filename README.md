# miaosha   最终版见分支v3.0
高并发秒杀商城
- #### 使用 Spring boot、集成 Thymeleafr、result、封装集成 mybatis_druid,集成 jedis+redis 完成项目框架的搭建
- #### 实现登录功能以及商品的秒杀功能
- #### 通过 redis 预减库存、消息队列异步下单、秒杀商品库存状态记录等方法提高秒杀接口的并发量，使用 Jmeter 压测软件对该接口进行性能测试，  
- #### 测试方法：编写测试程序创建 5000 个用户写入数据库，模拟用户登录并记录返回 Cookie 中的登录 token 信息，使用 Jmeter 创建 5000 个线程循环 5  - #### 次,携带记录的 Cookie 信息进行压测。均可正常完成秒杀功能，吞吐量可达1000/s（Intel i5-7500 机器，2G 内存，单机部署，局域网内测试，忽略带         宽.
-  #### 秒杀流程
1. 登录进入商品列表页面，静态资源缓
2. 点击进入商品详情页面，静态资源缓存，ajax获取验证码(服务器生成三个数的预算，并将结果缓存到redis);
3. 点击秒杀, 将验证码结果和商品ID传给后端，如果结果正确。动态生成随机串UUID,结合用户ID和商品ID存入redis，并将path传给前端。前端获取path后，再根    据path地址调用秒杀服务；
4. 服务端获取请求的path参数，去查缓存是否在；
5. 如果存在，预减redis库存，如果还有库存，看是否已经生成订单，没有的话就将请求入消息队列。
6. 下单：减库存，生成订单；
7. 前端轮询订单生成结果。50ms继续轮询或者秒杀是否成功和失败;
